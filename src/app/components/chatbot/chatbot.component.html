<!-- BotÃ³n flotante -->
<div class="chatbot-button" (click)="toggleChat()">
  <img src="assets/img/chat-icon.ico" alt="Chat Icon" class="chatbot-icon" />
</div>

<!-- Ventana del chatbot -->
<div class="chatbot-window" *ngIf="isOpen">
  <div class="chat-header">
    <span>Asistente Maido ðŸ¤–</span>
    <button class="close-btn" (click)="toggleChat()">âœ–</button>
  </div>

  <div class="chat-body" #chatBody>
    <div *ngFor="let msg of messages" [ngClass]="msg.from" class="message">
      <span class="text">{{ msg.text }}</span>

      <!-- ðŸ”˜ Botones interactivos del bot -->
      <div class="bot-buttons" *ngIf="msg.buttons && msg.from === 'bot'">
        <button
          *ngFor="let b of msg.buttons"
          (click)="sendMessage(b.value, b.route)"
        >
          {{ b.label }}
        </button>
      </div>

      <span class="time">{{ msg.time }}</span>
    </div>

    <!-- ðŸ’­ Indicador de escritura -->
    <div class="typing-indicator" *ngIf="isTyping">
      <span></span><span></span><span></span>
    </div>
  </div>

  <div class="chat-input">
    <input
      type="text"
      placeholder="Escribe un mensaje..."
      [(ngModel)]="userInput"
      (keydown.enter)="sendMessage()"
    />
    <button (click)="sendMessage()">Enviar</button>
  </div>
</div>
